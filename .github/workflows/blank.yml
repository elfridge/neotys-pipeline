name: Neoload Test

on:
  push:
    branches:
      - main

jobs:
  neoload_test:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout repository
        uses: actions/checkout@v2

      - name: Install Neoload CLI
        run: pip3 install -U neoload
        
      - name: Login to Neoload
        run: neoload login --url 'https://neoload-api.saas.neotys.com/' --token '2715b6aafd2f6eb568e7d62b709e5a28a4cf6df9711db161'
        
      - name: Extract Neoload test project
        run: unzip demowebshopp.zip -d demowebshopp

      - name: Run Neoload test
        run: neoload run --scenario "scenario1"
